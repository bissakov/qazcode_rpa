{"id":"rpa-0mt","title":"Persist Global Settings to Config File","description":"Implement persistent global application settings storage.\n\nCurrently, AppSettings (font_size, show_minimap, allow_node_resize, language, current_max_entry_size) are in-memory only and reset on app close. This task adds configuration file persistence.\n\n## Requirements\n\n1. **Config File System**\n   - Use dirs::config_dir() for platform-specific config location\n   - Store settings in {config_dir}/rpa-studio/settings.json\n   - Auto-create config directory if missing\n\n2. **Settings Serialization**\n   - Serialize AppSettings struct to JSON\n   - Implement load_settings() function (returns AppSettings, fallback to defaults if missing)\n   - Implement save_settings() function (called after settings dialog Apply)\n\n3. **Integration Points**\n   - Load settings during app initialization (before UI rendering)\n   - Save settings when user clicks Apply in Settings dialog (main.rs line 515)\n   - Update font size and locale on load (currently done at startup)\n\n4. **Error Handling**\n   - Log config file errors to console (not execution panel)\n   - Gracefully fallback to default AppSettings if config is corrupted\n\n## Files to Modify\n- crates/rpa-studio/src/main.rs (AppSettings struct, initialization, settings dialog)\n- Cargo.toml (add dirs crate dependency if needed)\n\n## Notes\n- This task is a prerequisite for 'Open Last Project on Startup' feature\n- Keep settings global (not per-project)\n- All strings use i18n t!() macro","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-25T17:54:23.0053123+05:00","updated_at":"2025-12-25T17:54:29.3461273+05:00"}
{"id":"rpa-1p7","title":"Add allow-attributes reason clauses to #[allow] attributes","description":"Add reason clauses to #[allow] attributes: (1) activity_metadata.rs:157 - add reason to 'allow(clippy::type_complexity)', (2) ir.rs:142 - add reason to 'allow(dead_code)'. Pattern: #[allow(lint, reason = \"explanation\")]","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-25T16:02:59.5347425+05:00","updated_at":"2025-12-25T16:13:05.8793816+05:00"}
{"id":"rpa-258","title":"Fix default_trait_access (use Self::default())","description":"Fix default_trait_access by using Self::default() instead of Default::default() where applicable","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-25T16:00:07.1268172+05:00","updated_at":"2025-12-25T16:11:54.1410025+05:00"}
{"id":"rpa-2v5","title":"Implement flattened multi-scenario IR with call stack","description":"# Flattened Multi-Scenario IR with Call Stack\n\n## Architecture Overview\n\nImplement a **multi-scenario IR compilation system** that:\n- Flattens all reachable scenarios into a single linear instruction stream\n- Uses a runtime call stack for nested scenario execution (not inlining)\n- Pre-allocates all variables for reachable scenarios before execution begins\n- Supports parameter passing with In/Out/InOut semantics\n- Enforces complete variable isolation per call frame\n- Validates all variable names globally — no shadowing allowed (compile-time error)\n- Detects recursion at compile-time and warns, but allows it with runtime depth guard (max 100)\n\n## Critical Design Points\n\n### Variable Model (Preserved)\n- **All variables pre-allocated at IR compile-time** via `variables.id(name)`\n- UI receives complete variable list **before execution starts**\n- Only `VarEvent::SetId` events during execution (no surprises)\n- **Zero variable creation during execution** — all must exist at compile-time\n\n### Parameter Passing Semantics\n- **In**: Copy value in → param_var (isolated, not visible to caller after)\n- **Out**: Start undefined → param_var gets initial value during call → copy back to source_var\n- **InOut**: Copy value in → param_var → copy back to source_var\n\n### Variable Scoping Rule (Complete Isolation)\n- Scenario can only access variables it receives as In/Out/InOut parameters\n- All other variables are local to that scenario\n- Parent cannot see child's local variables\n- Requires explicit parameter passing for all cross-scenario variable access\n\n### Variable Shadowing Validation\n- If Scenario A defines variable \"x\" and Scenario B also tries to define \"x\" → **COMPILE-TIME ERROR**\n- All variable names must be unique across entire reachable program\n- Prevents confusion and accidental aliasing\n\n### Recursion Handling\n- Compile-time: Detect cycles in call graph → **warn but allow**\n- Runtime: Max call depth guard (100) → **error if exceeded**\n- Allows valid recursive scenarios while preventing infinite loops\n\n### Try/Catch Across Boundaries\n- Error propagates up call stack, caught at nearest handler\n- Standard exception semantics\n\n## Data Structure Changes\n\n### Activity::CallScenario (node_graph.rs:592-594)\n```rust\n// Current\nCallScenario {\n    scenario_id: Uuid,\n}\n\n// New\nCallScenario {\n    scenario_id: Uuid,\n    parameters: Vec\u003cParameterBinding\u003e,  // NEW\n}\n```\n\n### New Enums/Structs to Add (node_graph.rs after Activity enum)\n```rust\n#[derive(Debug, Clone, Copy, Serialize, Deserialize, PartialEq)]\npub enum ParameterDirection {\n    In,      // Copy value in, discard on return\n    Out,     // No copy in, copy value out on return\n    InOut,   // Copy value in, copy value out on return\n}\n\n#[derive(Debug, Clone, Serialize, Deserialize)]\npub struct ParameterBinding {\n    pub param_var_id: VarId,        // Variable ID in called scenario\n    pub source_var_id: VarId,       // Variable ID in caller scenario\n    pub direction: ParameterDirection,\n}\n\n#[derive(Debug, Clone, Serialize, Deserialize)]\npub struct ScenarioParameter {\n    pub var_id: VarId,\n    pub var_name: String,\n    pub direction: ParameterDirection,\n}\n```\n\n### Extended Scenario Struct (node_graph.rs:265-270)\n```rust\npub struct Scenario {\n    pub id: Uuid,\n    pub name: String,\n    pub nodes: Vec\u003cNode\u003e,\n    pub connections: Vec\u003cConnection\u003e,\n    pub parameters: Vec\u003cScenarioParameter\u003e,  // NEW: Parameter definitions\n}\n```\n\n### Extended IrProgram Struct (ir.rs:88-93)\n```rust\npub struct IrProgram {\n    pub instructions: Vec\u003cInstruction\u003e,\n    pub entry_point: usize,\n    pub scenario_start_index: HashMap\u003cUuid, usize\u003e,      // NEW: Maps scenario ID → instruction index\n    pub scenario_call_graph: HashMap\u003cUuid, HashSet\u003cUuid\u003e\u003e,  // NEW: Maps scenario ID → reachable scenarios\n    pub recursive_scenarios: HashSet\u003cUuid\u003e,              // NEW: Set of recursive scenario IDs\n}\n```\n\n### Instruction Enum Addition (ir.rs:12-86)\n```rust\n// Extend existing enum with:\nCallScenario {\n    scenario_id: Uuid,\n    parameters: Vec\u003cParameterBinding\u003e,  // NEW: Parameter bindings\n}\n```\n\n### Extended IrBuilder Struct (ir.rs:140-150)\n```rust\npub struct IrBuilder\u003c'a\u003e {\n    project: \u0026'a Project,  // Changed from: scenario: \u0026'a Scenario\n    program: IrProgram,\n    \n    // NEW: Cross-scenario reachability tracking\n    scenario_reachable_nodes: HashMap\u003cUuid, HashSet\u003cUuid\u003e\u003e,\n    compiled_scenarios: HashSet\u003cUuid\u003e,\n    compiled_nodes: HashSet\u003c(Uuid, Uuid)\u003e,  // (scenario_id, node_id)\n    node_start_index: HashMap\u003c(Uuid, Uuid), usize\u003e,\n    scenario_start_indices: HashMap\u003cUuid, usize\u003e,\n    \n    // Existing\n    variables: \u0026'a mut Variables,\n    \n    // NEW: Call graph for recursion detection\n    call_graph: HashMap\u003cUuid, HashSet\u003cUuid\u003e\u003e,\n}\n```\n\n### Call Stack in IrExecutor (execution.rs:22-30)\n```rust\npub struct CallFrame {\n    scenario_id: Uuid,\n    return_address: usize,\n    parameter_bindings: Vec\u003cParameterBinding\u003e,\n    var_snapshot: Vec\u003cVarId\u003e,  // Optional: save local var state\n}\n\npub struct IrExecutor\u003c'a, L: LogOutput\u003e {\n    program: \u0026'a IrProgram,\n    project: \u0026'a Project,\n    context: \u0026'a mut ExecutionContext,\n    log: \u0026'a mut L,\n    error_handlers: Vec\u003cusize\u003e,\n    iteration_counts: HashMap\u003cusize, usize\u003e,\n    \n    call_stack: Vec\u003cCallFrame\u003e,              // NEW: Call stack for nested scenarios\n    current_scenario_id: Uuid,               // NEW: Track current scenario context\n}\n```\n\n## Compilation Pipeline (4 Phases)\n\n### Phase 1: Cross-Scenario Reachability Analysis\n- Start from `main_scenario` Start node\n- Follow `CallScenario` edges (DFS)\n- Build: `scenario_reachable_nodes` (nodes reachable within each scenario)\n- Build: `call_graph` (scenario → scenarios it calls)\n- Detect cycles → warn but allow compilation\n\n**Files affected:**\n- `crates/rpa-core/src/validation.rs` (ScenarioValidator, lines ~400-500)\n- Add new function: `compute_call_graph() -\u003e HashMap\u003cUuid, HashSet\u003cUuid\u003e\u003e`\n- Add new function: `detect_recursive_scenarios() -\u003e HashSet\u003cUuid\u003e`\n\n### Phase 2: Variable Allocation \u0026 Validation\nFor each reachable scenario:\n- Register all variables from SetVariable activities\n- Register all variables from Loop index parameters\n- Register all formal parameters from CallScenario bindings\n- Call `variables.id(name)` to pre-allocate VarIds\n\n**Validate:**\n- No duplicate variable names across all reachable scenarios → error if found\n- All referenced variables exist\n\n**Files affected:**\n- `crates/rpa-core/src/ir.rs` (IrBuilder::build, lines 273-286)\n- Add new method: `fn allocate_variables_for_reachable_scenarios() -\u003e Result\u003c(), String\u003e`\n- Add new method: `fn validate_variable_uniqueness() -\u003e Result\u003c(), String\u003e`\n\n### Phase 3: IR Instruction Generation (Single Pass)\n- Traverse reachable scenarios as single DFS tree from main Start node\n- Generate single linear instruction stream\n- Record `scenario_start_index` for each scenario\n- When `CallScenario` reached: embed parameter bindings in instruction\n\n**Files affected:**\n- `crates/rpa-core/src/ir.rs` (IrBuilder methods, lines 273-656)\n- Refactor: `fn compile_from_node() -\u003e Result\u003c(), String\u003e` to track (scenario_id, node_id) instead of just node_id\n- Add new method: `fn compile_scenario_in_flattened_context() -\u003e Result\u003c(), String\u003e`\n\n### Phase 4: Recursion Detection \u0026 Warning\n- Analyze `call_graph` for cycles (DFS-based cycle detection)\n- For each cycle found: log warning to validation results\n- Still allow compilation and execution\n- Runtime guard: max call depth = 100 (in executor)\n\n**Files affected:**\n- `crates/rpa-core/src/validation.rs` (ScenarioValidator, lines ~400-500)\n- `crates/rpa-core/src/ir.rs` (IrBuilder::build, after Phase 3 compilation)\n\n## Execution Pipeline\n\n### When Instruction::CallScenario is executed (execution.rs, new handler ~496-545)\n1. Check call depth \u003c 100 → error if exceeded\n2. Parameter copy-in (In/InOut directions):\n   - For each binding: copy `source_var` value → `param_var`\n   - Send `VarEvent::SetId` to UI for each parameter\n3. Push call frame to stack:\n   - Store: scenario_id, return_address (pc + 1), parameter_bindings\n4. Update current_scenario_id\n5. Log \"Entering scenario: {name}\"\n6. Jump to `scenario_start_index[scena\n","acceptance_criteria":"\n✓ Multi-scenario reachability analysis implemented (Phase 1)\n✓ Variable allocation and uniqueness validation working (Phase 2)\n✓ Single-pass flattened IR compilation complete (Phase 3)\n✓ Recursion detection with warnings operational (Phase 4)\n✓ Call stack execution with In/Out/InOut parameter passing working\n✓ All variables pre-allocated before execution (UI visibility)\n✓ Complete variable isolation per call frame enforced\n✓ No variable shadowing allowed (compile-time error)\n✓ Runtime recursion depth guard (max 100) functional\n✓ Existing projects still work (empty parameters = no isolation)\n","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-26T14:05:42.1842209+05:00","updated_at":"2025-12-26T14:05:42.1842209+05:00"}
{"id":"rpa-3pg","title":"Use let...else pattern where applicable","description":"Use let...else pattern where applicable. Affects: evaluator.rs lines 176-179 where match on Option is used for current()","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T16:00:00.6316555+05:00","updated_at":"2025-12-25T21:27:37.2786783+05:00","closed_at":"2025-12-25T21:27:37.2786783+05:00","close_reason":"Closed"}
{"id":"rpa-42n","title":"Add #[non_exhaustive] to exported enums and structs","description":"Add #[non_exhaustive] attribute to exported enums and structs in activity_metadata.rs: ActivityCategory (line 6), ColorCategory (line 15), PropertyType (line 31), PinConfig (line 25), PropertyDef (line 41), ActivityMetadata (line 47)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T16:03:01.935582+05:00","updated_at":"2025-12-25T21:38:30.0929001+05:00","closed_at":"2025-12-25T21:38:30.0929001+05:00","close_reason":"Closed"}
{"id":"rpa-4jv","title":"Fix unneeded field patterns (use .. syntax)","description":"Fix unneeded field patterns. Replace wildcard patterns with .. syntax: (1) execution.rs:367 - change 'index: _' to use '..', (2) execution.rs:533 - change 'code: _' to use '..' in RunPowershell pattern, (3) validation.rs:638 - change 'level: _' to use '..' in Log pattern","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-25T16:02:57.1846289+05:00","updated_at":"2025-12-25T16:13:03.6442089+05:00"}
{"id":"rpa-4s0","title":"Investigate LLM-driven RPA project generation","description":"Research and explore feasibility of using LLMs to automatically generate RPA workflows from natural language descriptions or requirements","status":"open","priority":4,"issue_type":"feature","created_at":"2025-12-25T17:36:31.7534616+05:00","updated_at":"2025-12-25T21:33:53.7671035+05:00"}
{"id":"rpa-5m5","title":"Add allow attributes to intentional cast operations","description":"Add #[allow(clippy::cast_precision_loss)] and #[allow(clippy::cast_possible_truncation)] to intentional casts. Affects: execution.rs lines 360, 403, 423, 429, 434 for i64\u003c-\u003ef64 conversions in loop handling","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-25T16:00:05.8315915+05:00","updated_at":"2025-12-25T16:11:53.0074129+05:00"}
{"id":"rpa-6q3","title":"Fix single-character lifetime names (use 'lifetime or 'scope)","description":"Replace single-character lifetime names 'a with more descriptive names: (1) execution.rs:22 and 100 - IrExecutor\u003c'a, L\u003e struct and impl, (2) ir.rs:140 and 174 - IrBuilder\u003c'a\u003e struct and impl, (3) validation.rs:94 and 99 - ScenarioValidator\u003c'a\u003e struct and impl. Use names like 'exec, 'builder, 'val etc.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-25T16:02:58.3712822+05:00","updated_at":"2025-12-25T16:13:04.7939616+05:00"}
{"id":"rpa-7id","title":"Replace UUID with Nanoid for node identifiers","description":"Replace Uuid with Nanoid for shorter, human-readable node identifiers.\n\nPROBLEM\n=======\nCurrent implementation uses uuid::Uuid for node IDs, which are 36 characters long. This is unnecessarily verbose for display in UI panels and log entries. UUIDs also impose unnecessary memory overhead when storing 10-100 nodes per scenario.\n\nSOLUTION\n========\nReplace Uuid with Nanoid (10-character string IDs) - a proven, fast ID generation library with virtually zero collision risk at our scale. IDs will remain human-readable while being ~71% shorter.\n\nKEY DECISIONS\n=============\n- Use nanoid!(NANOID_LENGTH) with compile-time configurable length\n- Store as String in structs, pass as \u0026str references to functions (zero-clone pattern)\n- No backward compatibility with old UUID-based .rpa files\n- NANOID_LENGTH constant in constants.rs (default 10, can bump to 12 if needed)\n\nFILES TO MODIFY\n===============\n1. Cargo.toml (workspace root)\n   - Add 'nanoid' to workspace.dependencies\n\n2. crates/rpa-core/src/constants.rs\n   - Add: pub const NANOID_LENGTH: usize = 10;\n\n3. crates/rpa-core/src/node_graph.rs\n   - Line 4: Change 'use uuid::Uuid;' to 'use nanoid::nanoid;'\n   - Line 266: Scenario.id: Uuid → String\n   - Line 275: Uuid::new_v4() → nanoid!(NANOID_LENGTH).into()\n   - Line 309: Node.id: Uuid → String\n   - Line 309: Uuid::new_v4() → nanoid!(NANOID_LENGTH).into()\n   - Line 342: Connection.id: Uuid → String\n   - Line 342: Uuid::new_v4() → nanoid!(NANOID_LENGTH).into()\n   - Activity enum variants storing IDs (scenario_id fields): Uuid → String\n   - All function signatures taking node IDs: change from 'id: Uuid' to 'id: \u0026str'\n   \n4. crates/rpa-core/src/ir.rs\n   - Review all uuid usage and replace with String/\u0026str pattern\n   - Update function signatures to use \u0026str for parameters\n\n5. crates/rpa-core/src/execution.rs\n   - Review all uuid usage and replace with String/\u0026str pattern\n   - Update function signatures to use \u0026str for parameters\n\n6. crates/rpa-core/src/validation.rs\n   - Review all uuid usage and replace with String/\u0026str pattern\n\n7. crates/rpa-studio/src/main.rs\n   - Review all uuid usage and replace with String/\u0026str pattern\n   - Update HashMap\u003cUuid, Uuid\u003e instances to HashMap\u003cString, String\u003e\n\n8. crates/rpa-studio/src/ui.rs\n   - Review all node.id comparisons and references\n   - Update function signatures to use \u0026str for ID parameters\n\nPATTERN TO FOLLOW\n=================\nWhen an ID is:\n- Stored in a struct: String (owns the ID)\n- Passed as parameter: \u0026str (no clone, cheap comparison)\n- Generated: nanoid!(NANOID_LENGTH).into()\n- Compared: n.id == id (String impl PartialEq\u003c\u0026str\u003e)\n\nTESTING\n=======\nAfter changes:\n1. cargo build --release (should compile without warnings)\n2. cargo clippy (fix any warnings)\n3. Verify .rpa file serialization/deserialization works\n4. Test node creation/deletion/connections in rpa-studio\n5. Verify log entries display node IDs correctly","status":"in_progress","priority":2,"issue_type":"feature","created_at":"2025-12-26T12:26:22.9573506+05:00","updated_at":"2025-12-26T18:10:36.8321347+05:00"}
{"id":"rpa-90k","title":"Fix bug: copy-pasting connected nodes between scenarios loses connections","description":"Fix copy-paste of nodes between scenarios: Connections between copied nodes are lost when pasting into a different scenario because the code only looks for connections in the destination scenario's connection list, not in the source scenario's list.\n\nSolution: Extend the clipboard structure from `Vec\u003cNode\u003e` to also store the internal connections between copied nodes. When pasting, reconstruct these connections using the ID remapping table.\n\nImplementation steps:\n1. Create ClipboardData struct { nodes: Vec\u003cNode\u003e, connections: Vec\u003cConnection\u003e }\n2. Replace clipboard: Vec\u003cNode\u003e with clipboard: ClipboardData in main.rs:112\n3. Update copy_selected_nodes() (lines 1198-1208) to capture internal connections\n4. Update paste logic (lines 1256-1264) to use clipboard.connections instead of scenario.connections\n5. Update clipboard_empty checks to use .nodes.is_empty()\n6. Test cross-scenario copy-paste preserves connections\n\nRoot cause: crates/rpa-studio/src/main.rs:1253-1264 filters connections from `get_current_scenario_mut()` which is the destination scenario, not the source.\n\nTechnical details:\n- Clipboard currently only stores: `clipboard: Vec\u003cNode\u003e` (crates/rpa-studio/src/main.rs:112)\n- Should also store: internal connections and their branch types\n- Current ID remapping: crates/rpa-studio/src/main.rs:1232-1233 creates old_to_new_id HashMap\n- This mapping can be reused to remap stored connections\n- Connection struct: crates/rpa-core/src/node_graph.rs:573-591\n- Scenario struct: crates/rpa-core/src/node_graph.rs contains connections Vec","status":"open","priority":1,"issue_type":"bug","created_at":"2025-12-25T15:50:37.7144045+05:00","updated_at":"2025-12-25T17:31:41.0671252+05:00"}
{"id":"rpa-9mv","title":"Add missing documentation and crate-level docs","description":"Add missing documentation: (1) Add crate-level doc comment to lib.rs (line 1), (2) Add missing_docs_in_private_items documentation for internal modules and items. This is lower priority - add basic docs only where critical for API users","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-25T16:03:06.7719209+05:00","updated_at":"2025-12-25T16:13:12.6298587+05:00"}
{"id":"rpa-d5u","title":"Open Last Project on Startup","description":"Implement optional feature to automatically open the most recently opened project on startup.\n\n## ⚠️ STRICT REQUIREMENT\n**DO NOT ATTEMPT THIS TASK UNTIL 'Persist Global Settings to Config File' (rpa-0mt) IS CLOSED.**\nThis task depends on the config file infrastructure implemented in rpa-0mt.\n\n## Requirements\n\n1. **Settings Extension**\n   - Add to AppSettings struct: open_last_project: bool (default false)\n   - Add to AppSettings struct: last_project_path: Option\u003cPathBuf\u003e\n   - Both fields persist via config file (rpa-0mt)\n\n2. **Settings UI**\n   - Add checkbox in Settings dialog: 'Open last project on startup'\n   - Display current last project path (read-only text field or info label)\n   - Checkbox toggles the setting\n\n3. **Startup Logic**\n   - During app initialization, after loading settings:\n     - If open_last_project is true AND last_project_path exists as valid file\n       - Load the project via open_project()\n     - If open_last_project is true BUT file missing/deleted\n       - Open blank project (default behavior)\n       - Log ERROR to execution panel: 'Last project file not found: {path}. Opening blank project.'\n     - If open_last_project is false\n       - Open blank project (current behavior)\n\n4. **Track Last Project**\n   - Update last_project_path after successful project load (open_project())\n   - Update last_project_path after successful project save (save_project_as())\n   - Both require calling save_settings() to persist config\n\n5. **Edge Cases**\n   - First launch (no previous project): Opens blank project\n   - Corrupted path in config: Treated as missing file\n   - New project created and saved: Becomes the 'last project'\n   - User manually opens different project: Updates last_project_path\n\n## Files to Modify\n- crates/rpa-studio/src/main.rs (AppSettings, RpaApp::default, open_project, save_project_as, Settings dialog UI)\n\n## Logging Format\nLogEntry {\n    timestamp: '[hh:mm.ss]' (auto-generated),\n    level: LogLevel::Error,\n    activity: 'SYSTEM',\n    message: 'Last project file not found: /path/to/file. Opening blank project.'\n}\n\n## Notes\n- Reuse save_settings()/load_settings() from rpa-0mt\n- Use dirs::config_dir() for config path consistency\n- All UI strings use i18n t!() macro","status":"open","priority":4,"issue_type":"feature","created_at":"2025-12-25T17:54:31.5137861+05:00","updated_at":"2025-12-25T17:54:39.0271278+05:00","dependencies":[{"issue_id":"rpa-d5u","depends_on_id":"rpa-0mt","type":"blocks","created_at":"2025-12-25T17:54:41.4086341+05:00","created_by":"daemon"}]}
{"id":"rpa-d5y","title":"Replace wildcard enum imports with explicit imports","description":"Replace wildcard enum imports with explicit imports. Specifically in activity_metadata.rs line 163: change 'use ActivityCategory::*' to explicit variant imports","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-25T15:59:56.770678+05:00","updated_at":"2025-12-25T16:11:45.9369139+05:00"}
{"id":"rpa-dh8","title":"Fix item ordering to match clippy requirements (alphabetical/grouped)","description":"Fix item ordering in activity_metadata.rs: (1) Move START_METADATA static (line 283) before ActivityCategory impl (line 271), (2) Reorder ActivityCategory variants alphabetically, (3) Reorder ColorCategory variants alphabetically (line 15), (4) Reorder PropertyType variants alphabetically (line 31), (5) Reorder PropertyDef fields alphabetically (line 41), (6) Reorder ActivityMetadata fields alphabetically (line 47)","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-25T16:03:03.1495624+05:00","updated_at":"2025-12-25T16:13:09.2096895+05:00"}
{"id":"rpa-dw5","title":"Add #[must_use] attributes to pure functions","description":"Add #[must_use] attributes to pure functions that return values. Affects: activity_metadata.rs (lines 58 for_activity, 76 all_activities, 158 activities_by_category, 272 translation_key), execution.rs (lines 48 get_timestamp, 95 is_stopped)","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-25T15:59:54.2031044+05:00","updated_at":"2025-12-25T16:11:56.4284681+05:00"}
{"id":"rpa-gpi","title":"Add Cut functionality (Ctrl+X) for nodes with connections","description":"Implement Cut operation that copies selected nodes and their internal connections, then deletes them. Should be available via: 1) Right-click context menu 2) Ctrl+X keybind. Should preserve connections between cut nodes when pasting.\n\n⚠️ PREREQUISITE: Verify that issue rpa-90k is CLOSED before starting work. This task depends on the clipboard enhancement that rpa-90k implements.\n\nImplementation steps (after rpa-90k is complete):\n1. Add Cut variant to ContextMenuAction enum in crates/rpa-studio/src/ui.rs:12-18\n2. Update canvas context menu (ui.rs:242-276) to show Cut button when nodes selected\n3. Update node context menu (ui.rs:730-752) to show Cut button\n4. Create cut_selected_nodes() function in main.rs that:\n   - Calls copy_selected_nodes() to populate clipboard with nodes + connections\n   - Gets selected node IDs\n   - Removes those nodes from current scenario\n   - Clears selection\n5. Add Ctrl+X keybind handler in main.rs (lines 763-822)\n6. Update handle_context_menu_action() to handle ContextMenuAction::Cut\n7. Add localization strings: context_menu.cut in all locale files\n8. Test: Cut single node, cut multiple connected nodes, cut and paste between scenarios","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-25T15:52:58.3314124+05:00","updated_at":"2025-12-25T21:33:53.5755156+05:00"}
{"id":"rpa-h1a","title":"Fix missing localization keys in ru.yml and kz.yml","description":"Add missing localization keys and fix FIXME entries in Russian (crates/rpa-studio/locales/ru.yml) and Kazakh (crates/rpa-studio/locales/kz.yml) files.\n\nMissing keys (3 total):\n1. bottom_bar.clear - English value: \"❎Clear\"\n2. variables.undefined - English value: \"Undefined\"\n3. settings_dialog.log_entry_count - English value: \"Max log entry count:\"\n\nFIXME entries requiring proper translation:\n\nRussian (ru.yml) - 4 entries:\n1. Line 27: activity_buttons.evaluate - has \"+ Evaluate FIXME\"\n2. Line 40: activity_names.evaluate - has \"Evaluate FIXME\"\n3. Line 60: properties.evaluate_expression - has \"Expression: FIXME\"\n4. Line 129: system_messages.invalid_variable_value - duplicate entry with English text instead of Russian\n\nKazakh (kz.yml) - 3 entries:\n1. Line 27: activity_buttons.evaluate - has \"+ Evaluate FIXME\"\n2. Line 40: activity_names.evaluate - has \"Evaluate FIXME\"\n3. Line 60: properties.evaluate_expression - has \"Expression: FIXME\"\n\nAfter making changes, run 'cargo run --bin validate_locale' to verify all localization files are complete and consistent.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T22:38:51.3937604+05:00","updated_at":"2025-12-25T22:42:57.8349532+05:00","closed_at":"2025-12-25T22:42:57.8349532+05:00","close_reason":"Closed"}
{"id":"rpa-i4o","title":"Replace match on bool with if/else expressions","description":"Replace match on bool with if/else expressions. Affects: execution.rs lines 233-236 where match is used on boolean result from interruptible_sleep","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T15:59:59.3748465+05:00","updated_at":"2025-12-25T21:26:25.6736317+05:00","closed_at":"2025-12-25T21:26:25.6736317+05:00","close_reason":"Closed"}
{"id":"rpa-in7","title":"Add allow attributes to intentionally long functions","description":"Add #[allow(clippy::too_many_lines)] to functions exceeding 100 lines. Affects: activity_metadata.rs (line 158 for activities_by_category), execution.rs (line 142 for execute_instruction)","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-25T15:59:58.058632+05:00","updated_at":"2025-12-25T16:11:47.0718097+05:00"}
{"id":"rpa-kdk","title":"Fix clippy needless_borrow warnings in evaluator.rs tests","description":"Remove unnecessary borrows in 5 test cases in evaluator.rs:615,624,633,642,651. Change \u0026variables.values() to variables.values() in eval_expr calls.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-25T15:55:39.7992663+05:00","updated_at":"2025-12-25T15:55:39.7992663+05:00"}
{"id":"rpa-kfh","title":"Add #[inline] hints to small methods and update visibility (pub/private consistency)","description":"Fix visibility consistency and add #[inline]: (1) execution.rs:18 - make 'variables' field private (partial_pub_fields warning), (2) node_graph.rs:145 - make 'max_entry_count' field private. Add #[inline] hints to small methods throughout the codebase as suggested by clippy","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-25T16:03:05.6213548+05:00","updated_at":"2025-12-25T16:13:11.4882945+05:00"}
{"id":"rpa-kz3","title":"Fix needless_borrow in evaluator.rs","description":"Fix needless_borrow warnings in crates/rpa-core/src/evaluator.rs at lines 614, 623, 632, 641, 650. Remove \u0026 before variables.values() calls.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-25T21:41:48.3936857+05:00","updated_at":"2025-12-25T21:45:16.2103252+05:00","closed_at":"2025-12-25T21:45:16.2103252+05:00","close_reason":"Closed"}
{"id":"rpa-nr7","title":"Add # Errors documentation to public Result-returning functions","description":"Add # Errors sections to public functions returning Result. Affects: evaluator.rs (lines 502, 518 for parse_expr and eval_expr), execution.rs (line 118 for execute method)","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-25T16:00:08.3333513+05:00","updated_at":"2025-12-25T16:11:55.2660231+05:00"}
{"id":"rpa-o08","title":"Fix needless_pass_by_value warnings (use references)","description":"Fix needless_pass_by_value warnings by using references instead of pass-by-value for types that don't need ownership. Affects: execution.rs (lines 598, 688, 724 for Sender; 691, 727 for IrProgram), evaluator.rs (line 324 for Token parameter)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T16:00:01.9511025+05:00","updated_at":"2025-12-25T17:09:02.9187972+05:00","closed_at":"2025-12-25T17:09:02.9187972+05:00","close_reason":"Closed"}
{"id":"rpa-ru0","title":"Convert canvas flow from horizontal to vertical with configurable direction","description":"## Complexity Level: Medium\n\nThis task requires changes across 2-3 core files with careful coordinate system transformations. The existing architecture is well-structured, making this feasible with focused effort.\n\n---\n\n## Problem\nCurrently the canvas uses horizontal left-to-right flow:\n- Input pins on left edge (x=0, y=height/2)\n- Output pins on right edge (x=width, y varies)\n- Bezier connections curve horizontally with control offsets on X-axis\n- New nodes are spaced horizontally based on X distance\n\nThis limits workflow readability for complex scenarios. Users need vertical top-to-bottom flow for better vertical screen usage and clearer step-by-step visualization.\n\n## Solution\nAdd a compile-time constant `FLOW_DIRECTION` to toggle between Horizontal and Vertical layouts. All layout logic will be conditioned on this constant using match statements, allowing easy switching without runtime overhead.\n\n### Pin Positioning Changes\n\n**Input pins:**\n- Horizontal: left-center (0.0, height/2)\n- Vertical: top-center (width/2, 0.0)\n\n**Output pins (default - single output):**\n- Horizontal: right-center (width, height/2)\n- Vertical: bottom-center (width/2, height)\n\n**Output pins (dual outputs - control flow, error handling):**\n- Horizontal: right-top (width, height/4) and right-bottom (width, 3×height/4)\n- Vertical: bottom-left (width/4, height) and bottom-right (3×width/4, height)\n\n**Error pins (always right-center, no exceptions):**\n- Position: (width, height/2) regardless of flow direction\n- Drawn separately, visually distinct from default pins\n\n## Implementation Details\n\n### Files to Modify (relative to repo root)\n\n1. **crates/rpa-core/src/constants.rs**\n   - Add FlowDirection enum (Horizontal, Vertical)\n   - Add FLOW_DIRECTION constant to UiConstants (default: Vertical)\n   - Lines: New (insert after line 3)\n\n2. **crates/rpa-core/src/node_graph.rs**\n   - Update get_input_pin_pos() [lines 375-377]\n     - Horizontal: position + (0.0, height/2)\n     - Vertical: position + (width/2, 0.0)\n   \n   - Update get_output_pin_pos() [lines 379-381]\n     - Horizontal: position + (width, height/2)\n     - Vertical: position + (width/2, height)\n   \n   - Update get_output_pin_pos_by_index(index) [lines 411-439]\n     - Horizontal: right edge at height/4 and 3×height/4\n     - Vertical: bottom edge at width/4 and 3×width/4\n   \n   - Consider adding get_error_pin_pos() method for right-center positioning\n   \n   - Use pattern: match UiConstants::FLOW_DIRECTION { ... }\n\n3. **crates/rpa-studio/src/ui.rs** - Bezier Control Point Calculations (4 locations)\n   \n   **Location A: find_connection_near_point() [lines 145-148]**\n   - Horizontal: distance = |end.x - start.x|; control1 = start + (offset, 0); control2 = end - (offset, 0)\n   - Vertical: distance = |end.y - start.y|; control1 = start + (0, offset); control2 = end - (0, offset)\n   \n   **Location B: find_intersecting_connections() [lines 208-211]**\n   - Same changes as Location A\n   \n   **Location C: draw_connection_transformed() [lines 1465-1468]**\n   - Same changes as Location A\n   \n   **Location D: Connection preview during drag [lines 981-983]**\n   - Same changes as Location A\n\n4. **crates/rpa-studio/src/ui.rs** - Node Insertion Spacing [lines 823-836]\n   - Horizontal: measure horizontal_distance on x-axis, expand nodes along x\n   - Vertical: measure vertical_distance on y-axis, expand nodes along y\n   - Change from: node.position.x adjustments\n   - Change to: node.position.y adjustments\n\n5. **crates/rpa-studio/src/ui.rs** - Pin Drawing in draw_node_transformed() [lines 1225-1427]\n   \n   **Input pin rendering [lines 1225-1237]**\n   - Update text position offset from Vec2::new(12.0 * zoom, 0.0) to appropriate offset for new location\n   \n   **Output pin text labels [lines 1259-1427]**\n   - All pin labels (\"T\", \"F\", \"B\", \"N\", \"S\", \"E\", \"C\") need repositioned\n   - Horizontal: labels right of pins with +X offset\n   - Vertical: labels above/below/left of pins with appropriate offsets\n   \n   **Error pin rendering (new)**\n   - Always render on right side at (width, height/2)\n   - Use label \"E\" or appropriate marker\n   - Offset text right: Vec2::new(12.0 * zoom, 0.0)\n\n### Implementation Pattern\n\nUse consistent conditional throughout:\n\n```rust\nmatch UiConstants::FLOW_DIRECTION {\n    FlowDirection::Horizontal =\u003e { /* current logic */ },\n    FlowDirection::Vertical =\u003e { /* new logic */ },\n}\n```\n\nThis keeps both implementations visible and maintainable side-by-side.\n\n## Testing Notes\n\n- After implementation, toggle FLOW_DIRECTION between Horizontal and Vertical\n- Verify pin positions change correctly in both directions\n- Test connection drawing: Bezier curves should route perpendicular to flow\n- Test node insertion: dragging nodes onto connections should space vertically (vertical mode)\n- Verify error pins always appear on right edge\n- Run cargo clippy and cargo build --release\n- Test with complex scenarios (nested conditions, loops with error handlers)\n\n## Related Notes\n\n- No new data structures needed (constants-only approach)\n- No user settings required (compile-time configuration)\n- Manual node positioning maintained (no auto-layout)\n- Both implementations coexist in code (easy to toggle)\n- See BEZIER_CURVES_ANALYSIS.md for visual examples of connection routing","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-25T22:28:12.0137484+05:00","updated_at":"2025-12-26T11:40:10.7182693+05:00","closed_at":"2025-12-26T11:40:10.7182693+05:00","close_reason":"Closed"}
{"id":"rpa-sct","title":"Move pub use exports to public modules instead of re-exports","description":"Convert pub use re-exports in lib.rs to public modules: (1) lines 11-13 activity_metadata exports, (2) line 14 constants exports, (3) lines 15-17 execution exports, (4) line 19 ir exports, (5) lines 20-22 node_graph exports, (6) lines 24-26 validation exports, (7) line 27 variables exports","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-25T16:03:04.3917349+05:00","updated_at":"2025-12-25T16:13:10.3681622+05:00"}
{"id":"rpa-sq2","title":"Replace map().unwrap_or() with map_or()","description":"Replace map().unwrap_or() with map_or() for better idiomaticity. Affects: execution.rs lines 398-404 where map(|n| n as i64).unwrap_or(*end) should use map_or(*end, |n| n as i64)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T16:00:04.5895129+05:00","updated_at":"2025-12-25T21:25:15.2264791+05:00","closed_at":"2025-12-25T21:25:15.2264791+05:00","close_reason":"Closed"}
{"id":"rpa-v12","title":"Fix unseparated literal suffixes (_u8 separators)","description":"Fix unseparated literal suffixes in crates/rpa-core/src/validation.rs. Replace 0u8, 1u8, 2u8, etc. with 0_u8, 1_u8, 2_u8 format. Affected lines: 932, 936, 940, 945, 953, 959, 963, 972, 979, 983, 987, 995, 1000, 1006-1012","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T16:02:56.0410844+05:00","updated_at":"2025-12-25T17:11:02.5105104+05:00","closed_at":"2025-12-25T17:11:02.5105104+05:00","close_reason":"Closed"}
{"id":"rpa-w53","title":"Fix uninlined format args throughout codebase","description":"Fix uninlined format args throughout codebase. Replace format!(\"{}\", var) with format!(\"{var}\"). Affects: activity_metadata.rs, evaluator.rs (lines 40, 50, 127, 284, 287, 496, 525), execution.rs (lines 170, 204, 230, 254, 278, 300, 305, 336, 341, 376, 465, 530, 566, 589, 650, 668, 704, 741)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T15:59:55.5000745+05:00","updated_at":"2025-12-25T17:15:19.3459117+05:00","closed_at":"2025-12-25T17:15:19.3459117+05:00","close_reason":"Closed"}
{"id":"rpa-xbd","title":"Fix else-if-without-else control flow patterns","description":"Fix else-if-without-else patterns by adding final else blocks: (1) ir.rs:221-224 - add else block after else if checking var_value, (2) validation.rs:370-380 - add else block after else if checking step \u003c 0","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-25T16:03:00.7495461+05:00","updated_at":"2025-12-25T16:13:06.9888746+05:00"}
{"id":"rpa-xsm","title":"Replace to_string with explicit clone where applicable","description":"Replace implicit_clone (to_string) with explicit clone. Affects: execution.rs line 268 where err.to_string() should be err.clone()","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-25T16:00:03.2758487+05:00","updated_at":"2025-12-25T16:11:50.6405398+05:00"}
